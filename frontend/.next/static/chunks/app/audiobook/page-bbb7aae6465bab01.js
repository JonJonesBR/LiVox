(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[979],{9393:function(e,a,t){Promise.resolve().then(t.bind(t,3060))},3060:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return H}});var s=t(7437),r=t(2265),i=t(7256),l=t(6061),o=t(7042),n=t(4769);function d(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,n.m6)((0,o.W)(a))}let c=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=r.forwardRef((e,a)=>{let{className:t,variant:r,size:l,asChild:o=!1,...n}=e,u=o?i.g7:"button";return(0,s.jsx)(u,{className:d(c({variant:r,size:l,className:t})),ref:a,...n})});u.displayName="Button";let m=(0,l.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),f=r.forwardRef((e,a)=>{let{className:t,variant:r,...i}=e;return(0,s.jsx)("div",{ref:a,role:"alert",className:d(m({variant:r}),t),...i})});f.displayName="Alert";let p=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:d("text-sm [&_p]:leading-relaxed",t),...r})});p.displayName="AlertDescription";var x=t(1243),h=t(2851);let v=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:d("rounded-xl border bg-card text-card-foreground shadow",t),...r})});v.displayName="Card";let g=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:d("flex flex-col space-y-1.5 p-6",t),...r})});g.displayName="CardHeader";let b=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("h3",{ref:a,className:d("font-semibold leading-none tracking-tight",t),...r})});b.displayName="CardTitle";let j=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("p",{ref:a,className:d("text-sm text-muted-foreground",t),...r})});j.displayName="CardDescription";let y=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:d("p-6 pt-0",t),...r})});y.displayName="CardContent";let N=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:d("flex items-center p-6 pt-0",t),...r})});N.displayName="CardFooter";let w=r.forwardRef((e,a)=>{let{className:t,type:r,...i}=e;return(0,s.jsx)("input",{type:r,className:d("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:a,...i})});w.displayName="Input";var k=t(6743);let C=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),_=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(k.f,{ref:a,className:d(C(),t),...r})});_.displayName=k.f.displayName;var A=t(4364),S=t(3523),R=t(2442);let z=A.fC;A.ZA;let P=A.B4,E=r.forwardRef((e,a)=>{let{className:t,children:r,...i}=e;return(0,s.jsxs)(A.xz,{ref:a,className:d("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...i,children:[r,(0,s.jsx)(A.JO,{asChild:!0,children:(0,s.jsx)(S.Z,{className:"h-4 w-4 opacity-50"})})]})});E.displayName=A.xz.displayName;let T=r.forwardRef((e,a)=>{let{className:t,children:r,position:i="popper",...l}=e;return(0,s.jsx)(A.h_,{children:(0,s.jsx)(A.VY,{ref:a,className:d("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:i,...l,children:(0,s.jsx)(A.l_,{className:d("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r})})})});T.displayName=A.VY.displayName;let F=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(A.__,{ref:a,className:d("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...r})});F.displayName=A.__.displayName;let O=r.forwardRef((e,a)=>{let{className:t,children:r,...i}=e;return(0,s.jsxs)(A.ck,{ref:a,className:d("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...i,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(A.wU,{children:(0,s.jsx)(R.Z,{className:"h-4 w-4"})})}),(0,s.jsx)(A.eT,{children:r})]})});O.displayName=A.ck.displayName;let D=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(A.Z0,{ref:a,className:d("-mx-1 my-1 h-px bg-muted",t),...r})});D.displayName=A.Z0.displayName;var U=t(1541);function I(e){let{selectedFile:a,handleFileChange:t,voices:r,selectedVoice:i,setSelectedVoice:l,bookTitle:o,setBookTitle:n}=e;return(0,s.jsxs)(v,{children:[(0,s.jsxs)(g,{children:[(0,s.jsxs)(b,{className:"flex items-center gap-2",children:[(0,s.jsx)(U.Z,{className:"h-5 w-5"}),"Upload de Arquivo"]}),(0,s.jsx)(j,{children:"Selecione um arquivo para converter em audiobook"})]}),(0,s.jsxs)(y,{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(_,{htmlFor:"file",children:"Arquivo"}),(0,s.jsx)(w,{id:"file",type:"file",accept:".pdf,.txt,.epub,.doc,.docx",onChange:t,className:"mt-1"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Formatos suportados: PDF, TXT, EPUB, DOC, DOCX"})]}),a&&(0,s.jsxs)("div",{className:"p-3 bg-blue-50 rounded-lg",children:[(0,s.jsxs)("p",{className:"text-sm font-medium text-blue-900",children:["Arquivo selecionado: ",a.name]}),(0,s.jsxs)("p",{className:"text-xs text-blue-600",children:[(a.size/1024/1024).toFixed(2)," MB"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(_,{htmlFor:"voice",children:"Voz"}),(0,s.jsxs)(z,{value:i,onValueChange:l,children:[(0,s.jsx)(E,{className:"mt-1",children:(0,s.jsx)(P,{placeholder:"Selecione uma voz"})}),(0,s.jsx)(T,{children:Object.entries(r).map(e=>{let[a,t]=e;return(0,s.jsx)(O,{value:a,children:t},a)})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(_,{htmlFor:"title",children:"T\xedtulo do Livro (Opcional)"}),(0,s.jsx)(w,{id:"title",type:"text",value:o,onChange:e=>n(e.target.value),placeholder:"Digite o t\xedtulo do livro",className:"mt-1"})]})]})]})}var q=t(2376);let B=(0,l.j)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",{variants:{size:{default:"h-6 w-11",sm:"h-5 w-9"}},defaultVariants:{size:"default"}}),G=r.forwardRef((e,a)=>{let{className:t,size:r,...i}=e;return(0,s.jsx)(q.fC,{className:d(B({size:r,className:t})),...i,ref:a,children:(0,s.jsx)(q.bU,{className:d("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});G.displayName=q.fC.displayName;var Z=t(9409);function V(e){let{useGemini:a,setUseGemini:t,geminiApiKey:r,setGeminiApiKey:i,handleSaveApiKey:l,apiKeySaved:o}=e;return(0,s.jsxs)(v,{children:[(0,s.jsxs)(g,{children:[(0,s.jsxs)(b,{className:"flex items-center gap-2",children:[(0,s.jsx)(Z.Z,{className:"h-5 w-5"}),"Configura\xe7\xf5es"]}),(0,s.jsx)(j,{children:"Configure op\xe7\xf5es avan\xe7adas de processamento"})]}),(0,s.jsxs)(y,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"space-y-0.5",children:[(0,s.jsx)(_,{children:"Usar IA Gemini"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Melhore o texto com intelig\xeancia artificial"})]}),(0,s.jsx)(G,{checked:a,onCheckedChange:t})]}),a&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(_,{htmlFor:"apiKey",children:"Chave API do Google Gemini"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(w,{id:"apiKey",type:"password",value:r,onChange:e=>i(e.target.value),placeholder:"Cole sua chave API aqui",className:"flex-1"}),(0,s.jsx)(u,{onClick:l,size:"sm",variant:o?"default":"outline",children:o?"✓ Salvo":"Salvar"})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Obtenha sua chave gratuita em: aistudio.google.com/app/apikey"})]})]})]})}var X=t(3177);let L=r.forwardRef((e,a)=>{let{className:t,value:r,...i}=e;return(0,s.jsx)(X.fC,{ref:a,className:d("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",t),...i,children:(0,s.jsx)(X.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(r||0),"%)")}})})});L.displayName=X.fC.displayName;var K=t(5817);function M(e){let{taskStatus:a,currentTask:t,downloadAudiobook:r}=e;return a?(0,s.jsxs)(v,{className:"mt-6",children:[(0,s.jsx)(g,{children:(0,s.jsx)(b,{children:"Status da Convers\xe3o"})}),(0,s.jsxs)(y,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("span",{className:"font-medium ".concat((e=>{switch(e){case"completed":return"text-green-600";case"failed":return"text-red-600";case"processing":case"converting":return"text-blue-600";default:return"text-gray-600"}})(a.status)),children:["in_queue"===a.status&&"Na fila","extracting"===a.status&&"Extraindo texto","formatting"===a.status&&"Formatando texto","ai_enhancing"===a.status&&"Melhorando com IA","converting"===a.status&&"Convertendo para \xe1udio","merging_audio"===a.status&&"Unificando \xe1udio","completed"===a.status&&"Conclu\xeddo","failed"===a.status&&"Falhou"]}),(0,s.jsxs)("span",{className:"text-sm text-gray-500",children:[a.progress,"%"]})]}),(0,s.jsx)(L,{value:a.progress,className:"w-full"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:a.message}),"completed"===a.status&&(0,s.jsxs)(u,{onClick:()=>t&&r(t),className:"w-full",children:[(0,s.jsx)(K.Z,{className:"mr-2 h-4 w-4"}),"Baixar Audiobook"]})]})]}):null}var Y=t(2601);function H(){let[e,a]=(0,r.useState)({}),[t,i]=(0,r.useState)(""),[l,o]=(0,r.useState)(null),[n,d]=(0,r.useState)(""),[c,m]=(0,r.useState)(!1),[j,N]=(0,r.useState)(""),[w,k]=(0,r.useState)(null),[C,_]=(0,r.useState)(null),[A,S]=(0,r.useState)(!1),[R,z]=(0,r.useState)(null),[P,E]=(0,r.useState)(!1),T=Y.env.NEXT_PUBLIC_API_URL||"http://localhost:8000";(0,r.useEffect)(()=>{F()},[]);let F=async()=>{try{let e=await fetch("".concat(T,"/voices"));if(e.ok){let t=await e.json();a(t);let s=Object.keys(t)[0];s&&i(s)}}catch(e){z("Erro ao carregar vozes dispon\xedveis")}},O=async()=>{if(!j.trim()){z("Por favor, insira uma chave API v\xe1lida");return}try{let e=new FormData;e.append("api_key",j);let a=await fetch("".concat(T,"/set_gemini_api_key"),{method:"POST",body:e});a.ok?(E(!0),z(null),setTimeout(()=>E(!1),3e3)):z("Erro ao salvar chave API")}catch(e){z("Erro ao conectar com o servidor")}},D=async()=>{if(!l){z("Por favor, selecione um arquivo");return}if(!t){z("Por favor, selecione uma voz");return}S(!0),z(null),_(null);try{let e=new FormData;e.append("file",l),e.append("voice",t),e.append("use_gemini",c.toString()),n.trim()&&e.append("book_title",n);let a=await fetch("".concat(T,"/process_file"),{method:"POST",body:e});if(a.ok){let{task_id:e}=await a.json();k(e),U(e)}else{let e=await a.json();z(e.detail||"Erro ao processar arquivo"),S(!1)}}catch(e){z("Erro ao conectar com o servidor"),S(!1)}},U=e=>{let a=setInterval(async()=>{try{let t=await fetch("".concat(T,"/status/").concat(e));if(t.ok){let s=await t.json();_(s),"completed"===s.status?(clearInterval(a),S(!1),setTimeout(()=>q(e),1e3)):"failed"===s.status&&(clearInterval(a),S(!1),z(s.message||"Erro na convers\xe3o"))}}catch(e){clearInterval(a),S(!1),z("Erro ao verificar status da tarefa")}},2e3)},q=async e=>{try{let t=await fetch("".concat(T,"/download/").concat(e));if(t.ok){var a;let e=await t.blob(),s=window.URL.createObjectURL(e),r=document.createElement("a");r.href=s,r.download=(null==C?void 0:null===(a=C.file_path)||void 0===a?void 0:a.split("/").pop())||"audiobook.mp3",document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(s),document.body.removeChild(r)}}catch(e){z("Erro ao baixar audiobook")}};return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"\uD83D\uDD0A Audiobook Generator"}),(0,s.jsx)("p",{className:"text-lg text-gray-600",children:"Transforme seus documentos em audiobooks com vozes naturais"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsx)(I,{selectedFile:l,handleFileChange:e=>{var a;let t=null===(a=e.target.files)||void 0===a?void 0:a[0];t&&(["application/pdf","text/plain","application/epub+zip","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/msword"].includes(t.type)?(o(t),z(null)):z("Tipo de arquivo n\xe3o suportado. Por favor, selecione PDF, TXT, EPUB ou DOCX."))},voices:e,selectedVoice:t,setSelectedVoice:i,bookTitle:n,setBookTitle:d}),(0,s.jsx)(V,{useGemini:c,setUseGemini:m,geminiApiKey:j,setGeminiApiKey:N,handleSaveApiKey:O,apiKeySaved:P})]}),(0,s.jsx)("div",{className:"mt-6 text-center",children:(0,s.jsx)(u,{onClick:D,disabled:A||!l||!t,size:"lg",className:"px-8 py-3",children:A?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Processando..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.Z,{className:"mr-2 h-4 w-4"}),"Gerar Audiobook"]})})}),(0,s.jsx)(M,{taskStatus:C,currentTask:w,downloadAudiobook:q}),R&&(0,s.jsx)(f,{className:"mt-6 border-red-200 bg-red-50",children:(0,s.jsx)(p,{className:"text-red-800",children:R})}),(0,s.jsxs)(v,{className:"mt-8",children:[(0,s.jsx)(g,{children:(0,s.jsx)(b,{children:"Como Usar"})}),(0,s.jsx)(y,{children:(0,s.jsxs)("ol",{className:"list-decimal list-inside space-y-2 text-sm text-gray-600",children:[(0,s.jsx)("li",{children:"Selecione um arquivo (PDF, TXT, EPUB, DOC ou DOCX)"}),(0,s.jsx)("li",{children:"Escolha uma voz na lista de op\xe7\xf5es"}),(0,s.jsx)("li",{children:"Opcional: Adicione um t\xedtulo para o audiobook"}),(0,s.jsx)("li",{children:"Opcional: Use IA Gemini para melhorar a qualidade do texto"}),(0,s.jsx)("li",{children:'Clique em "Gerar Audiobook" e aguarde o processamento'}),(0,s.jsx)("li",{children:"Baixe seu audiobook quando estiver pronto"})]})})]})]})})}}},function(e){e.O(0,[615,971,472,744],function(){return e(e.s=9393)}),_N_E=e.O()}]);